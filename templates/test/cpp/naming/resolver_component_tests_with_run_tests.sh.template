%YAML 1.2
--- |
  <%namespace file="resolver_component_tests_defs.include" import="*"/>\
  #!/bin/bash
  # Copyright 2015 gRPC authors.
  #
  # Licensed under the Apache License, Version 2.0 (the "License");
  # you may not use this file except in compliance with the License.
  # You may obtain a copy of the License at
  #
  #     http://www.apache.org/licenses/LICENSE-2.0
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS,
  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  # See the License for the specific language governing permissions and
  # limitations under the License.

  # This file is auto-generated

  set -ex

  # change to grpc repo root
  cd $(dirname $0)/../../..

  # if we're using run_tests.py, then rely on the invoker of this
  # shell script to tell where the other binaries are
  RESOLVER_TEST_BINPATH="$1"
  PICK_PORT_BINPATH="$2"
  INVOKE_DNS_SERVER_CMD_WITHOUT_ARGS="python test/cpp/naming/dns_server.py"
  ${resolver_component_tests(resolver_component_test_cases)}
  # Give the port back to the port server
  curl "localhost:32766/drop/$DNS_PORT"
  exit $EXIT_CODE
